<!DOCTYPE html>
<html>
<head>
    <title>Audio Test</title>
</head>
<body>
    <h1>ElevenLabs Audio Test</h1>
    <button id="playButton">Play Test Audio</button>
    <script>
        document.getElementById('playButton').onclick = function() {
            console.log('Button clicked. Fetching audio...');
            const apiKey = prompt("Please enter your ElevenLabs API Key");
            if (!apiKey) return;

            const voiceId = "21m00Tcm4TlvDq8ikWAM";
            const url = `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`;
            const headers = {
                "Accept": "audio/mpeg",
                "Content-Type": "application/json",
                "xi-api-key": apiKey,
            };
            const data = {
                text: "Hello! If you can hear this, your browser is working correctly.",
                model_id: "eleven_monolingual_v1"
            };

            fetch(url, { method: 'POST', headers: headers, body: JSON.stringify(data) })
                .then(response => response.blob())
                .then(blob => {
                    console.log('Audio data received.');
                    const audio = new Audio();
                    audio.src = URL.createObjectURL(blob);
                    audio.play().catch(e => console.error('Play command failed:', e));
                })
                .catch(error => console.error('Fetch error:', error));
        };
    </script>
</body>
</html>